/***** Drivers for Dynamixel AX-12A Servo Motor *****/

/***** Define to prevent recursive inclusion *****/
#ifndef __DYNAMIXEL_AX-12A_H
#define __DYNAMIXEL_AX-12A_H

/***** Includes *****/
#include "stm32f4xx_hal.h"

/***** Macros *****/
#define __DYNAMIXEL_TRANSMIT() HAL_GPIO_WritePin(GPIOF, GPIO_PIN_15, 1)
#define __DYNAMIXEL_RECEIVE() HAL_GPIO_WritePin(GPIOF, GPIO_PIN_15, 1)

/***** Private variables *****/
uint8_t buffrec[7];

/***** Exported types *****/
typedef struct{
	uint8_t					_ID;					/*!< Motor identification (0-252)					*/
	uint32_t				_BaudRate;				/*!< UART communication baud rate motor uses		*/
	uint16_t				_SetAngle;				/*!< Angle to be programmed into motor				*/
	uint16_t				_SetAngularVelocity;	/*!< Angular velocity to be programmed into motor	*/
}Dynamixel_HandleTypeDef;

/***** Private function prototypes *****/
static void Dynamixel_Init(Dynamixel_HandleTypeDef *hdynamixel, uint8_t ID, uint32_t BaudRate);
static void Dynamixel_SetAngle(Dynamixel_HandleTypeDef *hdynamixel, double angle);
static void Dynamixel_SetBaudRate(Dynamixel_HandleTypeDef *hdynamixel, double baud);
static void Dynamixel_SetID(Dynamixel_HandleTypeDef *hdynamixel, int ID);

#endif /* __DYNAMIXEL_AX-12A_H */
